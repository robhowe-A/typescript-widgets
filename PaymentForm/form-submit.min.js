//--Copyright (c) Robert A. Howell  2026
import secrets from"/secret-encrypt.js";const SecureForm={Initialize:e=>{document.forms.PIF.addEventListener("submit",async e=>{e.preventDefault(),document.forms.PIF.style.display="none";const t=new FormData(e.currentTarget),n=t.get("cardholder-name"),r=t.get("credit-number"),c=t.get("card-verification-number"),m=t.get("card-expiration-month"),a=document.querySelector('input[name="cardholder-name"]'),o=document.querySelector('input[name="credit-number"]'),u=document.querySelector('input[name="card-verification-number"]'),i=document.querySelector('input[name="card-expiration-month"]');a.remove(),o.remove(),u.remove(),i.remove();const d=document.forms.PIF.insertAdjacentElement("afterbegin",document.createElement("input"));d.name="cardholder-name",d.value=await secrets.bus.encrypt(n,null,"encrypted-name");const s=document.forms.PIF.insertAdjacentElement("afterbegin",document.createElement("input"));s.name="credit-number",s.value=await secrets.bus.encrypt(r,null,"encrypted-number");const l=document.forms.PIF.insertAdjacentElement("afterbegin",document.createElement("input"));l.name="card-verification-number",l.value=await secrets.bus.encrypt(c,null,"encrypted-code");const p=document.forms.PIF.insertAdjacentElement("afterbegin",document.createElement("input"));p.name="card-expiration-month",p.value=await secrets.bus.encrypt(m,null,"encrypted-month"),e.target.submit()})}};export default SecureForm;